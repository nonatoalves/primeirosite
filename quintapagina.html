<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Gastos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f9;
        }
        table {
            width: 100%;
            margin-bottom: 20px;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        input, select {
            padding: 5px;
            margin: 5px;
            width: 150px;
        }
        button {
            padding: 10px 15px;
            margin-top: 10px;
            cursor: pointer;
        }
        .form-group {
            margin-bottom: 10px;
        }
        .linha-total {
            font-weight: bold;
            background-color: #f0f0f0;
        }
        .pago {
            color: green;
            font-weight: bold;
        }
        .nao-pago {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Controle de Gastos</h1>
    
    <div class="form-group">
        <label for="categoria">Categoria:</label>
        <select id="categoria">
            <option value="Fixo">Fixo</option>
            <option value="Variável">Variável</option>
        </select>
        
        <label for="item">Item:</label>
        <input type="text" id="item" placeholder="Descrição do gasto" required>
        
        <label for="valor">Valor (R$):</label>
        <input type="number" id="valor" placeholder="Valor" required>
        
        <button onclick="adicionarGasto()">Adicionar Gasto</button>
    </div>

    <h2>Gastos</h2>
    <table>
        <thead>
            <tr>
                <th>Categoria</th>
                <th>Item</th>
                <th>Valor (R$)</th>
                <th>Ações</th>
                <th>Pagamento</th>
            </tr>
        </thead>
        <tbody id="gastos-lista">
            <!-- Aqui vão os gastos cadastrados -->
        </tbody>
    </table>

    <div class="linha-total">
        <p id="total-gastos">Total de Gastos Mensais: R$ 0,00</p>
        <p id="saldo-parcial">Saldo Parcial (não pago): R$ 0,00</p>
    </div>

    <button onclick="limparGastos()">Limpar Tudo</button>
    
    <h2>Fontes de Renda</h2>
    <div class="form-group">
        <label for="renda">Fonte de Renda:</label>
        <input type="text" id="renda" placeholder="Descrição da fonte de renda" required>
        
        <label for="valorRenda">Valor (R$):</label>
        <input type="number" id="valorRenda" placeholder="Valor da fonte" required>
        
        <button onclick="adicionarRenda()">Adicionar Renda</button>
    </div>

    <h2>Fontes de Renda</h2>
    <table>
        <thead>
            <tr>
                <th>Fonte de Renda</th>
                <th>Valor (R$)</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody id="rendas-lista">
            <!-- Aqui vão as fontes de renda cadastradas -->
        </tbody>
    </table>

    <h3>Resumo</h3>
    <p id="saldo-mensal">Saldo Mensal: R$ 0,00</p>
    <p id="previsao-lucro">Previsão de Lucro/Prejuízo Anual: R$ 0,00</p>

    <script>
        // Função para atualizar a tabela de gastos
        function atualizarTabela() {
            const gastos = JSON.parse(localStorage.getItem('gastos')) || [];
            const listaGastos = document.getElementById('gastos-lista');
            listaGastos.innerHTML = '';
            
            gastos.forEach((gasto, index) => {
                const pagoClass = gasto.pago ? 'pago' : 'nao-pago';
                tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${gasto.categoria}</td>
                    <td class="${pagoClass}">${gasto.item}</td>
                    <td class="${pagoClass}">R$ ${gasto.valor}</td>
                    <td><button onclick="excluirGasto(${index})">Excluir</button></td>
                    <td><button onclick="marcarComoPago(${index})">Marcar como Pago</button></td>
                `;
                listaGastos.appendChild(tr);
            });
            
            atualizarResumo();
        }

        // Função para adicionar gasto
        function adicionarGasto() {
            const categoria = document.getElementById('categoria').value;
            const item = document.getElementById('item').value;
            const valor = parseFloat(document.getElementById('valor').value);

            if (!item || isNaN(valor)) {
                alert('Por favor, preencha todos os campos corretamente.');
                return;
            }

            const gastos = JSON.parse(localStorage.getItem('gastos')) || [];
            gastos.push({ categoria, item, valor, pago: false });
            localStorage.setItem('gastos', JSON.stringify(gastos));
            atualizarTabela();
        }

        // Função para excluir gasto
        function excluirGasto(index) {
            const gastos = JSON.parse(localStorage.getItem('gastos')) || [];
            gastos.splice(index, 1);
            localStorage.setItem('gastos', JSON.stringify(gastos));
            atualizarTabela();
        }

        // Função para marcar gasto como pago
        function marcarComoPago(index) {
            const gastos = JSON.parse(localStorage.getItem('gastos')) || [];
            gastos[index].pago = !gastos[index].pago;  // Inverte o estado de pago
            localStorage.setItem('gastos', JSON.stringify(gastos));
            atualizarTabela();
        }

        // Função para limpar todos os gastos
        function limparGastos() {
            localStorage.removeItem('gastos');
            atualizarTabela();
        }

        // Função para atualizar a tabela de fontes de renda
        function atualizarTabelaRenda() {
            const rendas = JSON.parse(localStorage.getItem('rendas')) || [];
            const listaRendas = document.getElementById('rendas-lista');
            listaRendas.innerHTML = '';
            
            rendas.forEach((renda, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${renda.fonte}</td>
                    <td>R$ ${renda.valor}</td>
                    <td><button onclick="excluirRenda(${index})">Excluir</button></td>
                `;
                listaRendas.appendChild(tr);
            });

            atualizarResumo();
        }

        // Função para adicionar fonte de renda
        function adicionarRenda() {
            const fonte = document.getElementById('renda').value;
            const valor = parseFloat(document.getElementById('valorRenda').value);

            if (!fonte || isNaN(valor)) {
                alert('Por favor, preencha todos os campos corretamente.');
                return;
            }

            const rendas = JSON.parse(localStorage.getItem('rendas')) || [];
            rendas.push({ fonte, valor });
            localStorage.setItem('rendas', JSON.stringify(rendas));
            atualizarTabelaRenda();
        }

        // Função para excluir fonte de renda
        function excluirRenda(index) {
            const rendas = JSON.parse(localStorage.getItem('rendas')) || [];
            rendas.splice(index, 1);
            localStorage.setItem('rendas', JSON.stringify(rendas));
            atualizarTabelaRenda();
        }

        // Função para calcular saldo e previsão de lucro/prejuízo anual
        function atualizarResumo() {
            const gastos = JSON.parse(localStorage.getItem('gastos')) || [];
            const rendas = JSON.parse(localStorage.getItem('rendas')) || [];
            
            const totalGastos = gastos.reduce((acc, gasto) => acc + gasto.valor, 0);
            const totalRendas = rendas.reduce((acc, renda) => acc + renda.valor, 0);

            const totalNaoPago = gastos.filter(gasto => !gasto.pago).reduce((acc, gasto) => acc + gasto.valor, 0);
            const saldoMensal = totalRendas - totalGastos;
            const previsaoLucro = (saldoMensal * 12).toFixed(2);
            
            document.getElementById('saldo-mensal').innerText = `Saldo Mensal: R$ ${saldoMensal.toFixed(2)}`;
            document.getElementById('previsao-lucro').innerText = `Previsão de Lucro/Prejuízo Anual: R$ ${previsaoLucro}`;
            document.getElementById('total-gastos').innerText = `Total de Gastos Mensais: R$ ${totalGastos.toFixed(2)}`;
            document.getElementById('saldo-parcial').innerText = `Saldo Parcial (não pago): R$ ${totalNaoPago.toFixed(2)}`;
        }

        // Inicializar a tabela ao carregar a página
        window.onload = function() {
            atualizarTabela();
            atualizarTabelaRenda();
        };
    </script>
</body>
</html>
